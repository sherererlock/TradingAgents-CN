这个文件的主要作用是 **交易信号的结构化提取与解析**。

它的核心任务是将交易员（Trader）或风险裁判（Risk Judge）生成的非结构化文本报告（如“建议买入，因为……”），转换成系统可执行的结构化数据（JSON）。

### 核心类 `SignalProcessor`

1.  **`process_signal(...)`**:
    *   **输入**：包含交易建议的完整文本信号。
    *   **LLM 提取**：使用 Prompt 让 LLM 从文本中提取关键字段：
        *   `action`: 买入 (Buy) / 卖出 (Sell) / 持有 (Hold)。
        *   `target_price`: 目标价格。
        *   `confidence`: 信心指数 (0-1)。
        *   `risk_score`: 风险评分 (0-1)。
        *   `reasoning`: 简短的理由摘要。
    *   **鲁棒性处理**：
        *   支持中英文动作映射（如 "purchase" -> "买入"）。
        *   如果 LLM 未能提取到目标价格，会尝试使用正则表达式从文本中搜索。
        *   如果正则也失败，会调用 `_smart_price_estimation` 进行智能估算。

2.  **`_smart_price_estimation(...)`**:
    *   这是一个兜底逻辑。如果无法从文本中直接找到明确的目标价，它会尝试根据“现价”和“建议动作”来推算一个合理的目标价（例如：买入建议默认看涨 10-15%，卖出建议默认看跌 5-10%）。

3.  **`_extract_simple_decision(...)`**:
    *   这是最后的防线。如果 JSON 解析完全失败，它会退化为使用简单的关键词匹配来确定动作（买入/卖出/持有），并尽力提取价格，确保系统不会崩溃。

总的来说，这个模块是连接“自然语言决策”与“程序化执行”的桥梁，确保智能体的思考结果能被量化交易系统正确理解和执行。