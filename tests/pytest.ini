[pytest]
# 只收集结构化子目录，避免把诊断/脚本当成 pytest 用例收集
testpaths =
    tests/unit
    tests/system
    tests/config
    tests/middleware
    tests/services
    tests/dataflows
    tests/integration

# 默认跳过 integration 标记的测试（可通过 -m integration 运行）
addopts = -m "not integration" -k "not (test_server_config or test_stock_codes)"

# 标记定义，避免警告
markers =
    integration: 标记集成/端到端测试（默认跳过）
